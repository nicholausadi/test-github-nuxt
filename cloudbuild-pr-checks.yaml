steps:
- name: 'gcr.io/cloud-builders/npm'  
  args: ['install']

- name: 'gcr.io/cloud-builders/npm'
  args: ['run', 'test']

# Send Codecov
- name: 'gcr.io/cloud-builders/npm'
  args: ['run', 'codecov', '-t', '$_CODECOV_TOKEN']

# Build the container image
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/test-github-nuxt', '.']

# Push the container image to Container Registry
- name: 'gcr.io/cloud-builders/docker'
  args: ['push', 'gcr.io/$PROJECT_ID/test-github-nuxt']

timeout: '1600s'